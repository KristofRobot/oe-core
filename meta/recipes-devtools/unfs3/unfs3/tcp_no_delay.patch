---
 daemon.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

--- a/daemon.c
+++ b/daemon.c
@@ -17,6 +17,7 @@
 #ifndef WIN32
 #include <sys/socket.h>
 #include <netinet/in.h>
+#include <netinet/tcp.h>
 #include <arpa/inet.h>
 #include <syslog.h>
 #else				       /* WIN32 */
@@ -72,6 +73,7 @@ unsigned int opt_mount_port = NFS_PORT;
 int opt_singleuser = FALSE;
 int opt_brute_force = FALSE;
 int opt_testconfig = FALSE;
+int opt_tcp_nodelay = FALSE;
 struct in_addr opt_bind_addr;
 int opt_readable_executables = FALSE;
 char *opt_pid_file = NULL;
@@ -204,7 +206,7 @@ static void remove_pid_file(void)
 static void parse_options(int argc, char **argv)
 {
     int opt = 0;
-    char *optstring = "bcC:de:hl:m:n:prstTuwi:x:y:";
+    char *optstring = "bcC:de:hl:m:Nn:prstTuwi:x:y:";
 
     while (opt != -1) {
 	opt = getopt(argc, argv, optstring);
@@ -291,6 +293,9 @@ static void parse_options(int argc, char
 		    exit(1);
 		}
 		break;
+	    case 'N':
+		opt_tcp_nodelay = TRUE;
+		break;
 	    case 'n':
 		opt_nfs_port = strtol(optarg, NULL, 10);
 		if (opt_nfs_port == 0) {
@@ -760,6 +765,8 @@ static SVCXPRT *create_udp_transport(uns
 	sin.sin_addr.s_addr = opt_bind_addr.s_addr;
 	sock = socket(PF_INET, SOCK_DGRAM, 0);
 	setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, (char *) &on, sizeof(on));
+	if (opt_tcp_nodelay)
+	    setsockopt(sock, IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on));
 	if (bind(sock, (struct sockaddr *) &sin, sizeof(struct sockaddr))) {
 	    perror("bind");
 	    fprintf(stderr, "Couldn't bind to udp port %d\n", port);
